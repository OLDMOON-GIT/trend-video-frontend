# 🛒 쿠팡 → 워드프레스 자동 포스팅 가이드

쿠팡 상품을 AI가 자동으로 분석하여 워드프레스 블로그에 포스팅하는 시스템입니다.

## 🎯 주요 기능

1. **자동 크롤링**: 쿠팡 상품 페이지에서 제목, 이미지, 설명 자동 추출
2. **AI 카테고리 분류**: Claude AI가 상품을 자동으로 카테고리 분류
3. **AI 상세 설명 생성**: 매력적인 블로그 포스트 설명 자동 생성
4. **쿠팡 딥링크 생성**: 파트너스 제휴 링크 자동 생성
5. **워드프레스 자동 발행**: 썸네일 업로드 및 포스트 자동 생성

## 📋 사전 준비

### 1. 워드프레스 Application Password 생성

워드프레스 사이트에서 Application Password를 생성해야 합니다.

**생성 방법:**
1. 워드프레스 관리자 페이지 접속
2. **사용자 → 프로필** 메뉴로 이동
3. 하단의 **"Application Passwords"** 섹션 찾기
4. 새 비밀번호 이름 입력 (예: "Coupang Auto Post")
5. **"Add New Application Password"** 클릭
6. 생성된 비밀번호 복사 및 안전하게 보관

⚠️ **중요:** Application Password는 한 번만 표시되므로 반드시 복사하여 저장하세요!

**예시:**
```
xxxx xxxx xxxx xxxx xxxx xxxx
```

### 2. 쿠팡 파트너스 API 키 설정

이미 쿠팡 파트너스가 연동되어 있다면 이 단계는 건너뛰세요.

**환경 변수 설정:**
```bash
# .env.local 파일에 추가
COUPANG_ACCESS_KEY=your_access_key
COUPANG_SECRET_KEY=your_secret_key
```

### 3. Anthropic API 키 설정

AI 카테고리 분류 및 설명 생성을 위해 Claude API 키가 필요합니다.

```bash
# .env.local 파일에 추가
ANTHROPIC_API_KEY=your_anthropic_api_key
```

## 🚀 사용 방법

### 1. 워드프레스 설정

1. 네비게이션 바에서 **"📝 워드프레스"** 클릭
2. **"⚙️ 워드프레스 설정"** 버튼 클릭
3. 다음 정보 입력:
   - **워드프레스 사이트 URL**: `https://example.com`
   - **사용자명**: 워드프레스 관리자 사용자명
   - **Application Password**: 위에서 생성한 비밀번호
4. **"💾 설정 저장"** 클릭

### 2. 상품 포스팅

1. 쿠팡에서 포스팅하고 싶은 상품 페이지 접속
2. 상품 URL 복사 (예: `https://www.coupang.com/vp/products/123456`)
3. **"쿠팡 상품 URL"** 입력란에 붙여넣기
4. (선택사항) **"카테고리"**에 원하는 카테고리 입력
   - 비워두면 AI가 자동으로 분류합니다
5. **"🚀 자동 포스팅 시작"** 클릭

### 3. 포스팅 완료

자동으로 다음 작업이 수행됩니다:
1. ✅ 쿠팡 파트너스 딥링크 생성
2. ✅ 상품 정보 크롤링 (제목, 이미지, 설명)
3. ✅ AI 카테고리 자동 분류
4. ✅ AI 상세 설명 생성
5. ✅ 워드프레스에 썸네일 업로드
6. ✅ 워드프레스 포스트 자동 생성

완료되면 **포스트 URL**과 **쿠팡 딥링크**가 표시됩니다.

## 🎨 생성되는 포스트 구조

```html
<!-- 상세 설명 -->
<p>AI가 생성한 매력적인 상품 설명...</p>

<!-- 썸네일 이미지 -->
<img src="쿠팡 상품 이미지" alt="상품명"/>

<!-- 가격 정보 (있는 경우) -->
<p><strong>💰 가격:</strong> 29,900원 (30% 할인)</p>

<!-- 구매 버튼 -->
<a href="쿠팡 딥링크" class="button">🛒 쿠팡에서 구매하기</a>

<!-- 파트너스 고지 -->
<p><em>이 포스팅은 쿠팡 파트너스 활동의 일환으로, 이에 따른 일정액의 수수료를 제공받습니다.</em></p>
```

## 🤖 AI 카테고리 자동 분류

Claude AI가 상품 제목과 설명을 분석하여 다음 카테고리 중 자동 분류합니다:

- 패션
- 뷰티
- 식품
- 생활용품
- 디지털
- 가전
- 스포츠
- 완구
- 도서
- 반려동물
- 자동차
- 기타

원하는 카테고리가 있다면 직접 입력할 수도 있습니다.

## 📊 포스팅 히스토리

페이지 하단에서 최근 포스팅 히스토리를 확인할 수 있습니다:
- 카테고리
- 포스트 URL
- 생성 시간

## 🔒 보안

- Application Password는 암호화되어 데이터베이스에 저장됩니다
- 사용자별로 별도의 워드프레스 설정을 관리합니다
- 인증되지 않은 사용자는 접근할 수 없습니다

## ⚠️ 주의사항

1. **쿠팡 파트너스 수수료 고지**
   - 모든 포스트에 파트너스 활동 고지문이 자동으로 삽입됩니다
   - 관련 법규를 준수하기 위해 삭제하지 마세요

2. **상품 정보 크롤링 제한**
   - 쿠팡 사이트의 로봇 정책을 준수합니다
   - 과도한 요청은 IP 차단의 원인이 될 수 있습니다

3. **워드프레스 권한**
   - Application Password는 **편집자(Editor)** 이상의 권한이 필요합니다
   - 포스트 발행 권한이 있어야 합니다

## 🛠️ 트러블슈팅

### 워드프레스 연결 실패

**오류:** "워드프레스 API 연결 실패"

**해결 방법:**
1. 워드프레스 사이트 URL이 정확한지 확인 (https:// 포함)
2. Application Password가 올바른지 확인
3. 워드프레스 REST API가 활성화되어 있는지 확인
4. 방화벽이나 보안 플러그인이 API 접근을 차단하지 않는지 확인

### 이미지 업로드 실패

**오류:** "이미지 업로드 실패"

**해결 방법:**
1. 워드프레스 미디어 업로드 용량 제한 확인
2. 쿠팡 이미지 URL이 유효한지 확인
3. 워드프레스 서버 디스크 공간 확인

### AI 응답 실패

**오류:** "카테고리 분류 실패" 또는 "상세 설명 생성 실패"

**해결 방법:**
1. ANTHROPIC_API_KEY가 올바른지 확인
2. Claude API 사용량 한도 확인
3. 네트워크 연결 상태 확인

## 📝 개발자 정보

### API 엔드포인트

- **워드프레스 설정**: `/api/wordpress/settings`
- **자동 포스팅**: `/api/wordpress/auto-post`

### 데이터베이스 테이블

```sql
CREATE TABLE wordpress_settings (
  user_id TEXT PRIMARY KEY,
  site_url TEXT NOT NULL,
  username TEXT NOT NULL,
  app_password TEXT NOT NULL,
  created_at TEXT,
  updated_at TEXT,
  FOREIGN KEY (user_id) REFERENCES users(id)
);
```

### 사용된 라이브러리

- **워드프레스 클라이언트**: `src/lib/wordpress-client.ts`
- **쿠팡 클라이언트**: `src/lib/coupang-client.ts`
- **Claude AI**: Anthropic API

## 🚀 향후 개발 계획

- [ ] 일괄 포스팅 (여러 상품 한 번에)
- [ ] 예약 포스팅
- [ ] 커스텀 템플릿
- [ ] 포스트 수정/삭제 기능
- [ ] 통계 및 분석 대시보드
- [ ] 다른 쇼핑몰 지원 (11번가, G마켓 등)

## 📞 문의

문제가 발생하거나 기능 요청이 있으시면 이슈를 등록해주세요.

---

*Last Updated: 2025-11-05*
